---
import { getLocaleFromPath, type Locale } from '../../i18n';
import { useTranslations } from '../../i18n/utils';

interface Props {
  locale?: Locale;
}

const { locale: propLocale } = Astro.props;
const locale = propLocale || getLocaleFromPath(Astro.url.pathname);
const t = useTranslations(locale);

// Client logos - order matters for visual balance
const clients = [
  { name: 'BNP Paribas Fortis', src: '/logos/clients/bnp-paribas-fortis.svg' },
  { name: 'Belfius', src: '/logos/clients/belfius.svg' },
  { name: 'HMS Networks', src: '/logos/clients/hms-networks.svg' },
  { name: 'speos', src: '/logos/clients/speos.svg' },
  { name: 'Digitas', src: '/logos/clients/digitas.svg' },
];

// Check if file exists (build-time check not possible, so we use fallback in template)
---

<section
  class="py-12 border-y border-cloud bg-white"
  aria-label={t('proofbar.title')}
>
  <div class="mx-auto max-w-[var(--space-container)] px-[var(--space-gutter)]">
    <p class="text-center text-sm text-mist mb-8">
      {t('proofbar.title')}
    </p>
    <div class="flex flex-wrap items-center justify-center gap-x-12 gap-y-8 md:gap-x-16">
      {clients.map(client => (
        <div class="flex items-center justify-center h-8 md:h-10">
          <img
            src={client.src}
            alt={client.name}
            width="160"
            height="40"
            loading="lazy"
            decoding="async"
            class="h-8 md:h-10 w-auto max-w-[140px] md:max-w-[180px] object-contain grayscale opacity-60 hover:opacity-100 hover:grayscale-0 transition-all duration-300"
            onerror={`this.style.display='none'; this.nextElementSibling.style.display='block';`}
          />
          <span
            class="hidden text-sm md:text-base font-medium text-mist uppercase tracking-wider"
            aria-hidden="true"
          >
            {client.name}
          </span>
        </div>
      ))}
    </div>
  </div>
</section>
